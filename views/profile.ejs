<%- include("./templates/header", {pageName: "Profile" }) %>
<%- include("./templates/navbar", {currentPage: "profile" }) %>

<div class="max-w-lg flex flex-col justify-center mx-auto mb-2">
    <p class="font-bold text-2xl text-center m-2">
        <%= session.username %>
    </p>

    <label for="imageInput">
        <div id="profilePictureContainer" class="relative w-60 mx-auto rounded-full aspect-square border-8 border-zinc-800 intense-shadow select-none">
            <svg id="pencilIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="absolute text-white w-12 h-12 z-10 bg-zinc-200 invert rounded-full p-2 top-2 right-2">
                <path d="M7.127 22.562l-7.127 1.438 1.438-7.128 5.689 5.69zm1.414-1.414l11.228-11.225-5.69-5.692-11.227 11.227 5.689 5.69zm9.768-21.148l-2.816 2.817 5.691 5.691 2.816-2.819-5.691-5.689z"/></svg>
            <img id="profilePicture" src="<%= data.profilePictureUrl || 'images/defaultProfilePicture.webp' %>"
                class="rounded-full w-full h-full">
        </div>
    </label>

    <form id="uploadProfilePicForm" action="/uploadProfilePic" method="POST" enctype="multipart/form-data"
        class="flex flex-col items-center my-5 mx-2">
        <input type="file" name="image" id="imageInput" class="hidden" enctype="multipart/form-data" required />
        <button type="submit"
            class="shadow-2xl intense-shadow text-slate-200 text-center bg-zinc-800 hover:bg-zinc-700 focus:ring-4 focus:ring-zinc-300 font-medium rounded-lg focus:outline-none dark:focus:ring-zinc-500 mx-auto my-4 p-5 py-4 w-full">Confirm Change</button>
    </form>

    <div class="flex">
        <div
            class="flex-1 bg-zinc-400 text-center m-3 rounded-lg p-1 py-6 drop-shadow-lg intense-shadow flex flex-col justify-between">
            <p class="font-semibold mb-5">Wins</p>
            <p class="font-semibold">
                <%= data.winCount %>
            </p>
        </div>
        <div
            class="flex-1 bg-zinc-400 text-center m-3 rounded-lg p-1 py-6 drop-shadow-lg intense-shadow flex flex-col justify-between">
            <p class="font-semibold mb-5">Games Played</p>
            <p class="font-semibold">
                <%= data.winCount + data.loseCount %>
            </p>
        </div>
    </div>
</div>

<div class="max-w-lg flex flex-col justify-center mx-auto">
    <div class="flex flex-col m-2">
        <a href="/changePass" id="changePass"
            class="shadow-2xl intense-shadow text-slate-200 text-center bg-zinc-800 hover:bg-zinc-700 focus:ring-4 focus:ring-zinc-300 font-medium rounded-lg  focus:outline-none dark:focus:ring-zinc-500 mx-auto my-4 p-5 py-4 w-full">Change
            Password</a>
        <a href="/logout"
            class="drop-shadow-2xl intense-shadow text-slate-200 text-center bg-red-700 hover:bg-red-500 focus:ring-4 focus:ring-zinc-300 font-medium rounded-lg  focus:outline-none dark:focus:ring-zinc-500 mx-auto my-4 p-5 py-4 w-full">Log
            Out</a>
    </div>
</div>

<%- include("./templates/footer", {pageScript: "profile.js" }) %>